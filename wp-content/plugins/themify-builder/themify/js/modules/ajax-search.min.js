'use strict';(function(c){const r=function(a){const m=[],g="overlay"===a.type?a.container.querySelector("#searchform input"):a.el;let h,b,k;if("overlay"===a.type){b=a.container.getElementsByClassName("search-results-wrap")[0];const n=function(){a.container.classList.toggle("search-active",0<g.value.length)},l=a.container.getElementsByClassName("close-search-box")[0];a.el.addEventListener("click",function(b){b.preventDefault();n();a.container.classList.add("tf_fd_in");g.focus();c.body[0].style.overflowY=
"hidden";c.body[0].classList.add("searchform-slidedown")});l&&l.addEventListener("click",function(b){b.preventDefault();n();h&&k.abort();a.container.classList.remove("tf_fd_in");c.body[0].style.overflowY="visible";c.body[0].classList.remove("searchform-slidedown")})}else"dropdown"===a.type&&(a.container.classList.add("tf_rel","tf_s_dropdown"),a.container.insertAdjacentHTML("beforeend",'<div class="search-results-wrap tf_ajax_s_dropdown tf_scrollbar" style="display:none"></div>'),b=a.container.getElementsByClassName("search-results-wrap")[0],
g.addEventListener("blur",function(a){a.relatedTarget&&null!==a.relatedTarget.closest(".search-results-wrap")||(b.style.display="none")},{passive:!0}));if(b){const c=function(q){let e=q.getAttribute("href").replace("#","");if("all"===e)e="item";else{const a=b.getElementsByClassName("result-item");for(var f=a.length-1;-1<f;f--)a[f].classList.remove("tf_fd_in"),a[f].classList.add("tf_fd_out");setTimeout(function(){for(let b=a.length-1;-1<b;b--)a[b].classList.add("tf_hide")},400)}if(f=b.querySelector("#result-link-"+
e)){const a=document.getElementsByClassName("view-all-button")[0];a&&(a.style.display="none");f.style.display=""}const c=b.getElementsByClassName("result-"+e);setTimeout(function(){if(c[0])for(let a=c.length-1;-1<a;a--)c[a].classList.remove("tf_hide","tf_fd_out"),c[a].classList.add("tf_fd_in")},401);const d=q.closest("li");d.classList.add("active");Array.prototype.filter.call(d.parentNode.children,function(a){"LI"===d.tagName&&a!==d&&a.classList.remove("active")});"dropdown"===a.type&&g.focus()};
b.addEventListener("click",function(a){const b=a.target;"A"===b.tagName&&b.closest(".search-option-tab")&&(a.preventDefault(),c(b))});g.autocomplete="off";const l=function(a){if(null===a)return 0;let b=0;for(;a=a.previousElementSibling;)b++;return b},p=function(a){0>a&&(a=0);const e=b.querySelectorAll(".search-option-tab li");e[a]&&c(e[a].querySelector("a"));b.style.display=""};g.addEventListener("keyup",function(c){0<this.value.length?a.container.classList.add("search-active"):(a.container.classList.remove("search-active"),
b.style.display="none");if(48<=c.keyCode&&57>=c.keyCode||65<=c.keyCode&&90>=c.keyCode||8===c.keyCode||229===c.keyCode){let c=this.value.trim();if(c){const f=l(b.querySelector(".search-option-tab li.active"));m[c]?(b.style.display="none",b.innerHTML=m[c],p(f)):setTimeout(function(){c=g.value.trim();h&&k.abort();if(c){var e=new Headers({Accept:"application/json","X-Requested-With":"XMLHttpRequest"}),d=new FormData;d.append("action","themify_search_autocomplete");d.append("s",c);d.append("post_type",
a.post_type?a.post_type:"");a.term&&(d.append("term",a.term),d.append("tax",a.tax));a.container.classList.add("themify-loading");h=!0;k=new AbortController;fetch(themify_vars.ajax_url,{signal:k.signal,method:"POST",headers:e,body:d}).then(function(a){return a.text()}).then(d=>{c?d&&(b.style.display="none",b.innerHTML=d,p(f),m[c]=d):b.innerHTML="";a.container.classList.remove("themify-loading");h=!1}).catch(a=>{"AbortError"!==a.name&&console.error("Uh oh, an error!",a)})}else b.innerHTML=""},100)}else b.innerHTML=
""}},{passive:!0})}};c.on("themify_overlay_search_init",function(a){r(a)})})(Themify);
