'use strict';(function(p,g){const h=p.isTouch?window.PointerEvent?"pointerdown":"touchstart":"click",D=/iPhone|iPad|iPod|Mac OS/i.test(window.navigator.userAgent),u=function(a){a=Infinity===a?0:a;a=(new Date(1E3*a)).toISOString().substr(11,8).split(":");"00"===a[0]&&a.splice(0,1);return a.join(":")},E=function(a,f){const c=a.tracks,q=!!a.artists,e=!!a.images;a=!!a.tracknumbers;const k=g.createElement("div"),t=g.createElement("div");t.className="tf_audio_playlist";k.className="tf_playlist_current";
for(let b=0,f=c.length;b<f;++b)if(c[b].src){c[b].src=c[b].src.trim();let f=g.createElement("div"),e=g.createElement("a"),d=new Audio(c[b].src),k=g.createElement("div"),m=g.createElement("span");if(!c[b].type||d.canPlayType(c[b].type)){f.className="tf_playlist_item tf_w tf_rel";e.href=c[b].src;e.className="tf_playlist_caption tf_w";k.className="tf_playlist_length";!isNaN(d.duration)||c[b].meta&&c[b].meta.length_formatted?(k.textContent=isNaN(d.duration)?c[b].meta.length_formatted:u(d.duration),d=null):
(f.className+=" tf_lazy",d.addEventListener("durationchange",function(){k.textContent=u(this.duration);d=null;f.classList.remove("tf_lazy")},{passive:!0,once:!0}));!0===a&&(e.textContent=b+1+".");m.className="tf_playlist_title";c[b].caption?m.textContent=c[b].caption:c[b].title&&(m.textContent=c[b].title);if(!0===q&&c[b].meta&&c[b].meta.artists){let a=g.createElement("span");a.className="tf_playlist_artist";a.textContent="-"+c[b].meta.artists;e.appendChild(a)}e.appendChild(m);f.appendChild(e);f.appendChild(k);
t.appendChild(f)}else c.slice(b,1)}else c.slice(b,1);let r=!0;t.addEventListener(h,function(a){var d=a.target.closest(".tf_playlist_caption"),b=d.parentNode.classList.contains("tf_audio_current");if(d){a.preventDefault();a.stopPropagation();if(!b||f.paused)if(b)f.play();else{var h=this.getElementsByClassName("tf_audio_current")[0],l=p.convert(this.children).indexOf(d.parentNode);a=g.createElement("div");b=g.createElement("span");a.className="tf_playlist_caption";b.className="tf_playlist_title";!1===
r&&(f.pause(),f.addEventListener("loadedmetadata",function(){this.play()},{passive:!0,once:!0}),f.setAttribute("src",d.getAttribute("href")),f.load());h&&h.classList.remove("tf_audio_current");d.parentNode.classList.add("tf_audio_current");k.innerHTML="";c[l]&&(d=c[l],e&&d.thumb&&d.thumb.src&&(h=new Image,h.src=d.thumb.src,void 0!==d.thumb.width&&(h.width=d.thumb.width),void 0!==d.thumb.height&&(h.height=d.thumb.height),h.decode="async",l=g.createElement("div"),l.className="post-image",l.appendChild(h),
k.appendChild(l)),b.textContent=d.title?d.title:d.caption?d.caption:"",a.appendChild(b),c.meta&&(c.meta.album&&(b=g.createElement("span"),b.className=" tf_playlist_album",b.textContent=c.meta.album,a.appendChild(b)),q&&c.meta.artists&&(b=g.createElement("span"),b.className=" tf_playlist_artist",b.textContent=c.meta.artists,a.appendChild(b))),k.appendChild(a))}r=!1}});f.parentNode.insertBefore(k,f);p.triggerEvent(t.getElementsByClassName("tf_playlist_caption")[0],h);return t},A=function(a,f){const c=
g.createElement("div"),q=g.createElement("div"),e=g.createElement("div"),k=g.createElement("div"),t=g.createElement("div");g.createElement("div");const r=g.createElement("div"),b=g.createElement("input"),d=g.createElement("input"),v=g.createElement("div"),B=g.createElement("div"),l=g.createElement("div"),n=g.createElement("button"),m=g.createElement("button"),w=g.createElement("div");var x=a.parentNode.closest(".track");const y=g.createElement("div"),A=f&&f.tracks&&!0;let z=!0,C=!1;c.className="tf_audio_container tf_w tf_rel tf_box";
q.className="tf_audio_wrap tf_w tf_rel tf_box";l.className="tf_audio_controls";e.className="tf_audio_progress_wrap tf_rel tf_textl";k.className="tf_audio_progress_loaded tf_w tf_h tf_abs";t.className="tf_audio_progress_current tf_w tf_h tf_abs";b.className="tf_audio_progress_range tf_w tf_h tf_abs";d.min=b.min=0;d.max=b.max=100;d.type=b.type="range";b.value=0;d.value="50%";v.className="tf_audio_volumn_wrap";B.className="tf_audio_volumn_inner";d.className="tf_audio_volumn_range";n.className="tf_audio_mute";
m.className="tf_auido_play";m.tabIndex=n.tabIndex=0;m.type=n.type="button";a.muted&&(n.className+=" tf_muted");w.className="tf_audio_current_time";y.className="tf_audio_total_time";r.className="tf_audio_hover tf_abs tf_hide tf_box tf_textc";w.textContent=u(a.currentTime);y.textContent=u(a.duration);m.addEventListener(h,function(b){"click"===b.type&&(b.preventDefault(),b.stopPropagation());a.paused?a.play():a.pause()},{passive:"click"!==h});x&&(x=x.getElementsByClassName("track-title")[0])&&x.addEventListener(h,
function(a){a.preventDefault();a.stopPropagation();p.triggerEvent(m,h)});n.addEventListener(h,function(b){"click"===b.type&&(b.preventDefault(),b.stopPropagation());a.muted=!a.muted},{passive:"click"!==h});p.isTouch||e.addEventListener("mouseenter",function(){if(!isNaN(a.duration)){r.classList.remove("tf_hide");const b=this.clientWidth,c=parseFloat(r.clientWidth/2),f=a.duration,d=function(a){const d=void 0!==a.layerX?a.layerX:a.offsetX;0<d-c&&a.layerX<=b&&(r.style.transform="translateX("+(d-c)+"px)",
r.textContent=u(parseFloat(d/b)*f))};this.addEventListener("mouseleave",function(){r.classList.add("tf_hide");this.removeEventListener("mousemove",d,{passive:!0})},{passive:!0,once:!0});this.addEventListener("mousemove",d,{passive:!0})}},{passive:!0});b.addEventListener("input",function(b){b.preventDefault();b.stopPropagation();isNaN(a.duration)||(a.paused||!0!==z||a.pause(),C=!0,b=parseInt(this.value),a.currentTime=100===b?a.duration-1:parseFloat(b*a.duration/100).toFixed(4))});b.addEventListener("change",
function(b){b.preventDefault();b.stopPropagation();isNaN(a.duration)||(C=z=!1,a.paused&&a.play().then(a=>{z=!0}).catch(a=>{z=!0}))});a.addEventListener("progress",function(){0<this.buffered.length&&(k.style.transform="scaleX("+parseFloat(this.buffered.end(0)/this.duration).toFixed(4)+")")},{passive:!0});a.addEventListener("durationchange",function(){y.textContent=u(this.duration)},{passive:!0});a.addEventListener("waiting",function(){e.classList.add("tf_audio_waiting");this.addEventListener("playing",
function(){e.classList.remove("tf_audio_waiting")},{passive:!0,once:!0})},{passive:!0});a.addEventListener("emptied",function(){e.classList.add("tf_audio_waiting");this.addEventListener("playing",function(){e.classList.remove("tf_audio_waiting")},{passive:!0,once:!0})},{passive:!0});a.addEventListener("pause",function(){m.classList.remove("tf_audio_playing")},{passive:!0});a.addEventListener("play",function(){m.classList.add("tf_audio_playing");const a=g.getElementsByTagName("audio");for(let b=a.length-
1;-1<b;--b)a[b]!==this&&a[b].pause()},{passive:!0});a.addEventListener("timeupdate",function(){if(!isNaN(this.duration)){w.textContent=u(this.currentTime);let a=parseFloat(this.currentTime/this.duration);t.style.transform="scaleX("+a.toFixed(4)+")";!1===C&&(b.value=parseInt(100*a))}},{passive:!0});a.addEventListener("volumechange",function(){0!==this.volume&&n.classList.remove("tf_mute_disabled");!0===this.muted||0===this.volume?(0===this.volume&&n.classList.add("tf_mute_disabled"),n.classList.add("tf_muted")):
n.classList.remove("tf_muted")},{passive:!0});e.appendChild(k);e.appendChild(t);e.appendChild(b);e.appendChild(r);v.appendChild(n);!1===D&&(d.addEventListener("input",function(b){b.preventDefault();b.stopPropagation();a.volume=parseFloat(this.value/100).toFixed(3)}),B.appendChild(d),v.appendChild(B));q.appendChild(l);q.appendChild(w);q.appendChild(e);q.appendChild(y);q.appendChild(v);c.appendChild(q);if(A){const b=c.appendChild(E(f,a)),d=g.createElement("button"),e=g.createElement("button");d.className=
"tf_playlist_prev tf_play_disabled";e.className="tf_playlist_next";1>=b.children.length&&(e.className+=" tf_play_disabled");d.tabIndex=e.tabIndex=0;d.type=e.type="button";l.addEventListener(h,function(a){const c=a.target.classList;!c.contains("tf_play_disabled")&&(c.contains("tf_playlist_prev")||c.contains("tf_playlist_next"))&&("click"===a.type&&(a.preventDefault(),a.stopPropagation()),a=b.getElementsByClassName("tf_audio_current")[0])&&(a=c.contains("tf_playlist_prev")?a.previousElementSibling:
a.nextElementSibling)&&(p.triggerEvent(a.getElementsByClassName("tf_playlist_caption")[0],h),c.contains("tf_playlist_prev")?(e.classList.remove("tf_play_disabled"),c.toggle("tf_play_disabled",!a.previousElementSibling)):(d.classList.remove("tf_play_disabled"),c.toggle("tf_play_disabled",!a.nextElementSibling)))},{passive:"click"!==h});a.addEventListener("ended",function(){if(!e.classList.contains("tf_play_disabled"))p.triggerEvent(e,h);else if(a.hasAttribute("data-loop")||a.hasAttribute("loop")){const a=
b.getElementsByClassName("tf_playlist_caption")[0];a&&(d.classList.add("tf_play_disabled"),e.classList.toggle("tf_play_disabled",1>=b.children.length),p.triggerEvent(a,h))}},{passive:!0});l.appendChild(d);l.appendChild(m);l.appendChild(e)}else l.appendChild(m);a.parentNode.classList.remove("tf_lazy");a.parentNode.insertBefore(c,a)},F=function(a,f){for(let g=a.length-1;-1<g;--g){let e=a[g];if(null===e.previousElementSibling||!e.previousElementSibling.classList.contains("tf_audio_container")){if(!f){var c=
e.parentNode.parentNode;if(c.classList.contains("wp-audio-playlist")){let a=c.getElementsByClassName("tf-playlist-script")[0];a||(a=c.getElementsByClassName("wp-playlist-script")[0]);a&&(f=JSON.parse(a.textContent),"audio"!==f.type&&(f=!1))}}if(!e.hasAttribute("src")&&!e.getElementsByTagName("source")[0]){if(!f||!f.tracks)continue;c=f.tracks[0].src;if(!c)for(let a=1,e=f.tracks.length;a<e;++a)if(f.tracks[a].src){c=f.tracks[a].src;break}if(!c)continue;e.setAttribute("src",c)}4===e.readyState?A(e,f):
p.requestIdleCallback(function(){e.addEventListener("loadedmetadata",function(){A(this,f)},{passive:!0,once:!0});e.setAttribute("preload","metadata");!0===D&&e.load()},200)}}};p.on("tf_audio_init",function(a,f){a instanceof jQuery?a=a.get():void 0===a.length&&(a=[a]);F(a,f)})})(Themify,document);
