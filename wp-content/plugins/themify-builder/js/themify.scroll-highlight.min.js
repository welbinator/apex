'use strict';(function(A,d,x,l){let q=!1,f=null,r=!0,y=!0,p=!1,e=null;const g=Object.assign({speed:900,element:"module_row",offset:null,navigation:"#main-nav,.module-menu .nav",updateHash:!0},tbLocalScript.scrollHighlight),m=parseInt(g.offset),h=x.top,n=l.getElementById("headerwrap"),w={init(b){r=null!==n&&d.body[0].classList.contains("fixed-header-enabled")||0<m;if(!1===p){const a=h.location.hash.replace("#","");if(a&&"#"!==a){let b=u(l.querySelectorAll("."+g.element+'[data-anchor="'+a+'"]'));if(!b){let c=
l.querySelector('.module [data-id="'+a+'"]');c&&(b=c.closest(".module"))}b&&this.scrollTo(b,a)}else m&&d.scrollTo(m,g.speed);p=!0}this.createObserver(b)},changeHash(){if(!1===q){const a=h.location.hash.replace("#",""),c=l.querySelectorAll(g.navigation);for(let d=c.length-1;-1<d;--d){let k=c[d].getElementsByClassName("current-menu-item");for(var b=k.length-1;-1<b;--b)null===e&&(e=k[b].getElementsByTagName("a")[0].getAttribute("href")),k[b].classList.remove("current_page_item","current-menu-item");
(k=""!==a&&"#"!==a?c[d].querySelectorAll('a[href*="#'+a+'"]'):null)&&0!==k.length||(k=c[d].querySelectorAll('a[href="'+e+'"]'));for(b=k.length-1;-1<b;--b){let a=k[b].parentNode;a.classList.add("current-menu-item");a.classList.contains("menu-item-object-page")&&a.classList.add("current_page_item")}}null===e&&(e=h.location.href.split("#")[0])}},calculatePosition(b){b=A(b).offset().top+2;if(!0===r)if(m)b-=m-2;else if(n.classList.contains("fixed-header")){const a=n.getBoundingClientRect().bottom+2;b>=
a&&(b-=a)}return b},scrollTo(b,a){q=!0;d.lazyScroll(d.convert(d.selectWithParent("[data-lazy]",b)).reverse(),!0);const c=d.lazyScrolling,v=this,k=!1===p,f=function(){const f=z(),e=l.getElementsByClassName(g.element),p=new IntersectionObserver(function(a,b){for(let b=a.length-1;-1<b;--b)!0===a[b].isIntersecting&&d.lazyScroll(d.convert(d.selectWithParent("[data-lazy]",a[b].target)).reverse(),!0);b.disconnect()},{rootMargin:"300px 0px 300px 0px",threshold:.01});for(let a=e.length-1;-1<a;--a)e[a].hasAttribute("data-lazy")&&
!e[a].classList.contains("hide-"+f)&&p.observe(e[a]);!0===r&&(m||n.classList.contains("fixed-header"))&&d.scrollTo(v.calculatePosition(b),g.speed);d.lazyScrolling=c;q=!1;!1===k&&(a=b.hasAttribute("data-hide-anchor")?"":"#"+a.replace("#",""),h.history.replaceState(null,null,a));t()},e=!0!==r||!m&&n.classList.contains("fixed-header")?null:function(){(m||n.classList.contains("fixed-header"))&&d.scrollTo(v.calculatePosition(b),g.speed,f)};d.lazyScrolling=!0;d.scrollTo(v.calculatePosition(b),g.speed,f,
e);l.activeElement.blur()},createObserver(b){if(g.updateHash){null===f&&(f=new x.IntersectionObserver(function(a,b){if(!1===q){b=!1;for(let c=0,d=a.length;c<d;++c)!0===a[c].isIntersecting&&(b=a[c].target.getAttribute("data-anchor"));!1===b?!1===y?h.history.replaceState(null,null," "):y=!1:(h.history.replaceState(null,null,"#"+b),t())}},{rootMargin:"0px 0px -100%",thresholds:[0,1]}));b=d.selectWithParent(g.element,b);for(let a=b.length-1;-1<a;--a)if(!b[a].hasAttribute("data-hide-anchor")){let c=b[a].getAttribute("data-anchor");
c&&"#"!==c&&f.observe(b[a])}}}},z=function(){const b=d.w,a=tbLocalScript.breakpoints;for(let c in a)if(Array.isArray(a[c])){if(b>=a[c][0]&&b<=a[c][1])return c}else if(b<=a[c])return c;return"desktop"},u=function(b){if(!b[1])return b[0]?b[0]:null;let a=z();for(let c=0,d=b.length;c<d;++c)if(!b[c].classList.contains("hide-"+a))return b[c];return null},t=function(){w.changeHash()};d.on("tb_scroll_highlight_enable",function(){h.addEventListener("hashchange",t,{passive:!0});d.body.on("click.tb_scroll_highlight",
'[href*="#"]',function(b){var a=this.getAttribute("href");if(""!==a&&null!==a&&"#"!==a&&(a=new URL(a,h.location),a.hostname===h.location.hostname&&a.hash&&a.pathname===h.location.pathname&&(a=a.hash,""!==a&&"#"!==a))){const c=u(l.querySelectorAll("."+g.element+'[data-anchor="'+a.replace("#","")+'"]'));if(c||u(l.querySelectorAll(a+".module,"+a+".module_row")))d.trigger("tf_side_menu_hide_all"),c&&(b.preventDefault(),b.stopPropagation(),w.scrollTo(c,a))}})}).on("tb_scroll_highlight_disable",function(){f&&
(f.disconnect(),f=null);h.removeEventListener("hashchange",t,{passive:!0});d.body.off("click.tb_scroll_highlight")}).on("tb_init_scroll_highlight",function(b){w.init(b);d.trigger("tb_scroll_highlight_enable")})})(jQuery,Themify,window,document);
