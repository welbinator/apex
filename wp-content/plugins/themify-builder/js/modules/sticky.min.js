'use strict';(function(k,m){let v,n,p=!1,w=k.w,q=k.h,x=!1;const h=new Map,y="m"===tbLocalScript.is_sticky?parseInt(tbLocalScript.breakpoints.tablet[1]):!1,t=function(a,b){v&&cancelAnimationFrame(v);if(!0!==p){var d=a?this:m;v=requestAnimationFrame(function(){const a=d.pageYOffset;var e=b?b:h;for(let b of e){e=b[0];let c=b[1];var f=e.classList.contains("tb_sticky_scroll_active");if("disable"!==c)if(!0===c.isBottom&&a+q>=c.space||!0!==c.isBottom&&a>c.space){if(!1===f&&(e.style.width=c.w+"px",e.parentNode.style.height=
c.h+"px",e.style.position="fixed",!0===c.isBottom?e.style.bottom=c.value:e.style.top=c.value,e.classList.add("tb_sticky_scroll_active")),c.unstick&&c.unstick.item){f=c.unstick;let a=parseInt(c.value);var g=f.item.getBoundingClientRect();if("builder"===f.type)g=g.bottom-c.h-a;else if(g="passes"===f.r?g.bottom-a:g.top-c.h-a,"top"===f.cur||"bottom"===f.cur)g+=f.v,"bottom"===f.cur&&(g-=q);g=0>g?g+a+"px":c.value;c.currentTop!==g&&(c.currentTop=g,h.set(e,c),e.style.top=g)}}else!0===f&&r(e)}})}},r=function(a){a.style.width=
a.style.top=a.style.bottom=a.style.position=a.parentNode.style.height="";a.classList.remove("tb_sticky_scroll_active")},z=new MutationObserver(function(a){if(a[0]){let b=a[0].target.closest("[data-sticky-active]");b&&(n&&cancelAnimationFrame(n),n=requestAnimationFrame(function(){k.imagesLoad(b,function(){const a=new Map;r(b);u(b);a.set(b,h.get(b));t(null,a);b=n=null})}))}}),u=function(a,b,d){const k=a.classList.contains("tb_sticky_scroll_active");if(!1===k||!0===d){if(!h.has(a)||!0===d){d=JSON.parse(a.getAttribute("data-sticky-active"));
var e=!1,f=tbLocalScript.breakpoints,g=Object.keys(f);for(var l=g.length-1;-1<l;--l){let a=g[l],b="tablet_landscape"===a?"tl":a[0];if(void 0!==d[b]&&("mobile"!==a?f[a][1]:f[a])>=w){e=d[b];break}}!1===e&&(e=d.d);d=e;if(!d){h.set(a,"disable");r(a);return}f=d.stick||{};g=f.v?parseInt(f.v):0;e=d.unstick;l=f.u||"px";"px"!==l?(d.u=l,d.v=g):d.value=g+l;"bottom"===f.p&&(d.isBottom=!0);if(e){var c;f=a.closest(".themify_builder_content");if("builder"===e.type){if(c=f.closest("#tbp_header"))c=document.getElementById("tbp_content"),
(c=null!==c?c.getElementsByClassName("themify_builder_content")[0]:document.getElementsByClassName("themify_builder_content")[1])&&(f=c);c=f}else"row"===e.type&&(c=f.getElementsByClassName("tb_"+e.el)[0]),c||(c=f.getElementsByClassName("tb_"+e.el)[0]),c&&(e.v=parseInt(e.v));c&&(e.item=c)}a.parentNode.classList.contains("tb_sticky_wrapper")||(c=document.createElement("div"),c.className="tb_sticky_wrapper",a.parentNode.insertBefore(c,a),c.appendChild(a));h.set(a,d)}d=h.get(a);"disable"!==d&&("%"===
d.u&&0!==d.v&&(d.value=d.v/100*q+"px"),c=parseFloat(d.value),!0===k&&(a.style.position=""),b||(b=a.getBoundingClientRect()),d.w=0<b.width?b.width:a.offsetWidth,d.h=0<b.height?b.height:a.offsetHeight,d.space=void 0!==d.isBottom?b.bottom+m.pageYOffset+c:b.top+m.pageYOffset-c,d.t=b.top,a.parentNode.style.height!==d.h+"px"&&(a.parentNode.style.height=d.h+"px"),!0===k&&(a.style.position="fixed"),h.set(a,d))}},A=new IntersectionObserver(function(a,b){for(b=a.length-1;-1<b;--b)!0===a[b].isIntersecting&&
u(a[b].target,a[b].boundingClientRect)},{threshold:[.3,.4,.5,.6,.7,.8,.9,1]});k.on("tb_sticky_init",function(a){a instanceof jQuery&&(a=a.get());for(var b=a.length-1;-1<b;--b)A.observe(a[b]),z.observe(a[b],{subtree:!0,childList:!0});if(!1===x){x=!0;if(0<m.pageYOffset){for(b=a.length-1;-1<b;--b)u(a[b],a[b].getBoundingClientRect());t()}m.addEventListener("scroll",t,{passive:!0})}}).on("tfsmartresize",function(a){if(a){w=a.w;q=a.h;p=!!(y&&y>=w);for(let a of h)!0===p?r(a[0]):u(a[0],null,!0);!1===p&&t()}})})(Themify,
window);
